<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class He_companies extends CI_Controller {		/**	 * The Index Page.	 * The controller which shows options to register new patient.	 */	 	function  __construct() {		parent::__construct();		$this->load->model('clubs/he_model');	}		public function index()	{		$this->edit_company_info();	}		public function edit_company_info()	{		$data['active']='he_companies';		$data['sub_active']='he_companies';				$heId = $this->session->userdata('HE_id');		$data['comapny_data'] = $this->he_model->get_company_info($heId);		$data['comapny_data']= array_merge($data['comapny_data'],$this->he_model->get_company_address($heId));		//print_r($data['comapny_data']);		$this->load->view('clubs/edit_he',$data);	}		public function edit_info_submit()	{			$HEid  = $this->input->post('HEid', TRUE);			$HEname  = $this->input->post('HEname', TRUE);			$HEnumber   = $this->input->post('HEnumber', TRUE);			$HEDescription   = $this->input->post('HEDescription', TRUE);			$HEDocNum  = $this->input->post('HEDocNum', TRUE);			$HELatitude   = $this->input->post('HELatitude', TRUE);			$HELongitude   = $this->input->post('HELongitude', TRUE);			$HEphoneNumber  = $this->input->post('HEphoneNumber', TRUE);			$HEfax   = $this->input->post('HEfax', TRUE);			$HEContract   = $this->input->post('HEContract', TRUE);			$MedSquareInternalObs   = $this->input->post('MedSquareInternalObs', TRUE);						$Website  = $this->input->post('Website', TRUE);			$ResponsibleName   = $this->input->post('ResponsibleName', TRUE);			$ResponsibleEmail  = $this->input->post('ResponsibleEmail', TRUE);			$ResponsiblePhone  = $this->input->post('ResponsiblePhone', TRUE);			$Address   = $this->input->post('Address', TRUE);			$Zipcode   = $this->input->post('Zipcode', TRUE);			$Country  = $this->input->post('country', TRUE);			$State   = $this->input->post('state', TRUE);			$City   = $this->input->post('City', TRUE);					$arr = array('HEname'=>$HEname,'HEnumber'=>$HEnumber,'HEDescription' =>$HEDescription,'HEDocNum'=>$HEDocNum,'HELatitude'=>$HELatitude,'HELongitude'=>$HELongitude,'HEphoneNumber'=>$HEphoneNumber,'HEfax'=>$HEfax,'HEContract'=>$HEContract,'MedSquareInternalObs'=>$MedSquareInternalObs);						$userReqResult = $this->he_model->edit_company_info($HEid,$arr);						$arr2 = array('Website'=>$Website,'ResponsibleName'=>$ResponsibleName,'ResponsibleEmail' =>$ResponsibleEmail,'ResponsiblePhone'=>$ResponsiblePhone,'Address'=>$Address,'Zipcode'=>$Zipcode,'Country'=>$Country,'State'=>$State,'City'=>$City);						$userReqResult = $this->he_model->edit_company_address($HEid,$arr2);						header('Location: '.base_url().'clubs/dashboard');	}			//specializations	public function specializations($page=0)	{		$data['active']='specializations';		$data['sub_active']='he_special';				if($this->session->userdata(''))			$this->session->unset_userdata('');				$config = array();        $config["base_url"] = base_url() . "clubs/he_companies/specializations";        $config["total_rows"] = $this->he_model->specials_count();        $config["per_page"] = 20;		$config['num_links'] = 3;		$heId = $this->session->userdata('HE_id');		$data['specials']=$this->he_model->specializationlist_getall();        $data['selectedSpecials']=$this->he_model->selectedSpecializationlist($heId);				$this->load->view('clubs/specializations',$data);	}		public function updateSpecialization()	{				$heId = $this->session->userdata('HE_id');		$specialId = $this->input->post('specialId', TRUE);		$this->he_model->setSpecialization($heId,$specialId);		echo true;	}		public function updateServices()	{				$heId = $this->session->userdata('HE_id');		$serviceId = $this->input->post('serviceId', TRUE);		$this->he_model->setServices($heId,$serviceId);		echo true;	}		public function filtered_specializations($page=0)	{		$data['active']='specializations';		$data['sub_active']='he_special';				if($this->input->post('', TRUE)) {			$filter = $this->input->post('', TRUE);			$this->session->set_userdata('', $filter);		}		else {			$filter = $this->session->userdata('');		}			$config = array();        $config["base_url"] = base_url() . "he_companies/filtered_specializations";        $config["total_rows"] = $this->he_model->specials_filtered_count($filter);        $config["per_page"] = 20;		$config['num_links'] = 3;				$config['full_tag_open'] = '<div class="pagination"><ul>';		$config['full_tag_close'] = '</ul></div>';				$config['first_tag_open'] = '<li class="prev page">';		$config['first_tag_close'] = '</li>';		 		$config['last_tag_open'] = '<li class="next page">';		$config['last_tag_close'] = '</li>';				$config['next_tag_open'] = '<li class="next page">';		$config['next_tag_close'] = '</li>';				$config['prev_tag_open'] = '<li class="prev page">';		$config['prev_tag_close'] = '</li>';		 		$config['cur_tag_open'] = '<li class="active"><a href="">';		$config['cur_tag_close'] = '</a></li>';		 		$config['num_tag_open'] = '<li class="page">';		$config['num_tag_close'] = '</li>';				$config['next_link'] = 'Next';		$config['prev_link'] = 'Prev';         $this->pagination->initialize($config); 		$data['specials'] = $this->he_model->specializationlist_getall_filtered($config["per_page"], $page, $filter);        $data["links"] = $this->pagination->create_links();				$this->load->view('specializations',$data);	}		public function change_special_active()	{		$id = $this->input->post('id', TRUE);		$userExist = $this->he_model->change_special_active($id);	}		public function add_specialization()	{		$data['active']='specializations';		$data['sub_active']='he_special';				$this->load->view('add_specialization',$data);	}		public function edit_specialization()	{		$data['active']='specializations';		$data['sub_active']='he_special';				$id = $this->input->post('id', TRUE);		$data['special_data'] = $this->he_model->get_special_info($id);				$this->load->view('edit_specialization',$data);	}		public function edit_special_submit()	{			$specialID  = $this->input->post('specialID', TRUE);			$specialCode  = $this->input->post('specialCode', TRUE);			$specialName  = $this->input->post('specialName', TRUE);			$MedSquareInternalObs   = $this->input->post('MedSquareInternalObs', TRUE);					$arr = array('specialCode'=>$specialCode,'specialName' =>$specialName,'MedSquareInternalObs'=>$MedSquareInternalObs);						$userReqResult = $this->he_model->edit_special_info($specialID,$arr);						header('Location: '.base_url().'he_companies/specializations');	}		public function deleteEntry() {		$id = $this->input->post('id', TRUE);		$userExist =$this->he_model->delete_specialization($id);	}		public function add_newspecialization() {			$sercode  = $this->input->post('scode', TRUE); 			$sername   = $this->input->post('sname', TRUE);			$seriobs = $this->input->post('iobs', TRUE);						$date = date('Y-m-d H:i:s');			$curdate = $date;						$arr = array('specialCode'=>($sercode),'specialName' => ($sername),'MedSquareInternalObs'=>($seriobs),'insertionDate' => ($curdate),'Active' => 1);			$addspecializationResult=$this->he_model->add_specialization($arr);						header('Location:'.base_url().'he_companies/specializations');	}		//services	public function services($page=0)	{		$data['active']='services';		$data['sub_active']='he_services';				if($this->session->userdata(''))			$this->session->unset_userdata('');				$config = array();        $config["base_url"] = base_url() . "clubs/he_companies/services";        $config["total_rows"] = $this->he_model->specials_count();        $config["per_page"] = 20;		$config['num_links'] = 3;				$heId = $this->session->userdata('HE_id');		$data['services']=$this->he_model->servicelist_getall();		$data['selectedService']=$this->he_model->selectedServicelist($heId);		$this->load->view('clubs/services',$data);	}		public function filtered_services($page=0)	{		$data['active']='services';		$data['sub_active']='he_services';				if($this->input->post('', TRUE)) {			$filter = $this->input->post('', TRUE);			$this->session->set_userdata('', $filter);		}		else {			$filter = $this->session->userdata('');		}			$config = array();        $config["base_url"] = base_url() . "he_companies/filtered_services";        $config["total_rows"] = $this->he_model->specials_filtered_count($filter);        $config["per_page"] = 20;		$config['num_links'] = 3;				$config['full_tag_open'] = '<div class="pagination"><ul>';		$config['full_tag_close'] = '</ul></div>';				$config['first_tag_open'] = '<li class="prev page">';		$config['first_tag_close'] = '</li>';		 		$config['last_tag_open'] = '<li class="next page">';		$config['last_tag_close'] = '</li>';				$config['next_tag_open'] = '<li class="next page">';		$config['next_tag_close'] = '</li>';				$config['prev_tag_open'] = '<li class="prev page">';		$config['prev_tag_close'] = '</li>';		 		$config['cur_tag_open'] = '<li class="active"><a href="">';		$config['cur_tag_close'] = '</a></li>';		 		$config['num_tag_open'] = '<li class="page">';		$config['num_tag_close'] = '</li>';				$config['next_link'] = 'Next';		$config['prev_link'] = 'Prev';         $this->pagination->initialize($config); 		$data['services'] = $this->he_model->serviceslist_getall_filtered($config["per_page"], $page, $filter);        $data["links"] = $this->pagination->create_links();				$this->load->view('services',$data);	}		public function change_services_active()	{		$id = $this->input->post('id', TRUE);		$userExist = $this->he_model->change_services_active($id);	}		public function add_services()	{		$data['active']='services';		$data['sub_active']='he_services';				$this->load->view('add_services',$data);	}		public function edit_services()	{		$data['active']='services';		$data['sub_active']='he_services';				$id = $this->input->post('id', TRUE);		$data['special_data'] = $this->he_model->get_services_info($id);				$this->load->view('edit_service',$data);	}		public function edit_services_submit()	{			$serviceID  = $this->input->post('serviceID', TRUE);			$serviceCode  = $this->input->post('serviceCode', TRUE);			$serviceName  = $this->input->post('serviceName', TRUE);			$MedSquareInternalObs   = $this->input->post('MedSquareInternalObs', TRUE);					$arr = array('serviceCode'=>$serviceCode,'serviceName' =>$serviceName,'MedSquareInternalObs'=>$MedSquareInternalObs);						$userReqResult = $this->he_model->edit_services_info($serviceID,$arr);						header('Location: '.base_url().'he_companies/services');	}		public function delete_services() {		$id = $this->input->post('id', TRUE);		$userExist =$this->he_model->delete_services($id);	}		public function add_newservice() {			$serviceCode  = $this->input->post('serviceCode', TRUE); 			$serviceName   = $this->input->post('serviceName', TRUE);			$MedSquareInternalObs = $this->input->post('MedSquareInternalObs', TRUE);						$date = date('Y-m-d H:i:s');			$curdate = $date;						$arr = array('serviceCode'=>($serviceCode),'serviceName' => ($serviceName),'MedSquareInternalObs'=>($MedSquareInternalObs),'insertionDate' => ($curdate),'Active' => 1);			$addspecializationResult=$this->he_model->add_services($arr);						header('Location:'.base_url().'he_companies/services');	}		public function addHICompanyForHE(){			$companyId  = $this->input->post('companyId', TRUE); 		$heId = $this->session->userdata('HE_id');		$curdate = date('Y-m-d H:i:s');		$arr = array('heId'=>$heId,'hiCompanyId' => ($companyId),'createdDate' => ($curdate));		$this->he_model->addHICompanyForHE($arr);		echo $heId;	}	public function removeHICompanyForHE(){			$companyId  = $this->input->post('companyId', TRUE); 		$heId = $this->session->userdata('HE_id');		$this->he_model->removeHICompanyForHE($heId,$companyId);		echo true;		}		public function addHIPlanForHE(){			$planId  = $this->input->post('planId', TRUE); 		$heId = $this->session->userdata('HE_id');		$curdate = date('Y-m-d H:i:s');		$arr = array('heId'=>($heId),'hiPlanid' => ($planId),'createdDate' => ($curdate));		$this->he_model->addHIPlanForHE($arr);		echo true;	}	public function removeHIPlanForHE(){			$planId  = $this->input->post('planId', TRUE); 		$heId = $this->session->userdata('HE_id');		$this->he_model->removeHIPlanForHE($heId,$planId);		echo true;		}	//specializations	public function queueTime($page=0)	{		$data['active']='Queue Time';		$data['sub_active']='queueTime';				if($this->session->userdata(''))			$this->session->unset_userdata('');				$config = array();        $config["base_url"] = base_url() . "clubs/he_companies/queueTime";        $config["total_rows"] = $this->he_model->specials_count();        $config["per_page"] = 20;		$config['num_links'] = 3;		$heId = $this->session->userdata('HE_id');        $data['currentQueueTime']=$this->he_model->getCurrentQueueTime($heId);				$this->load->view('clubs/queueTime',$data);	}	public function updateQueueTime(){			$heId = $this->session->userdata('HE_id');		$queueTime  = $this->input->post('queueTime', TRUE);		$date = date('Y-m-d H:i:s');		$curdate = $date;				$arr = array('HEQueueTime'=>($queueTime),'HEQueueUpdateTime'=>($curdate));		$this->he_model->updateQueueTime($heId,$arr);	}		public function getInnerHEServices(){		$data['active']='services';		$data['sub_active']='he_services';				if($this->session->userdata(''))			$this->session->unset_userdata('');				$config = array();        $config["base_url"] = base_url() . "clubs/he_companies/getInnerHEServices";        $config["total_rows"] = $this->he_model->specials_count();        $config["per_page"] = 20;		$config['num_links'] = 3;				$heId = $this->session->userdata('HE_id');		$data['services']=$this->he_model->servicelist_getall();		$data['selectedService']=$this->he_model->selectedServicelist($heId);		$this->load->view('heInner/services',$data);		}		public function getInnerHESpecial($heId=0){		$data['active']='specializations';		$data['sub_active']='he_special';				if($this->session->userdata(''))			$this->session->unset_userdata('');		if($this->session->userdata('HE_id'))		{			$heId = $this->session->userdata('HE_id');		}else{			$this->session->set_userdata('HE_id',$heId);		}		$config = array();        $config["base_url"] = base_url() . "clubs/he_companies/getInnerHESpecial";        $config["total_rows"] = $this->he_model->specials_count();        $config["per_page"] = 20;		$config['num_links'] = 3;				$data['specials']=$this->he_model->specializationlist_getall();        $data['selectedSpecials']=$this->he_model->selectedSpecializationlist($heId);				$this->load->view('heInner/specializations',$data);		}}/* End of file welcome.php *//* Location: ./application/controllers/welcome.php */