<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class User_records extends CI_Controller {		/**	 * The Index Page.	 * The controller which shows options to register new patient.	 */	 	function  __construct() {		parent::__construct();		$this->load->model('clubs/user_model');	}		public function index()	{		$this->show_users();	}		public function patientInfo()	{		$data['active']='userrecords';		$id = $this->input->get('id', TRUE);		$data["user"] = $this->user_model->patientinfo($id);		$this->load->view('clubs/patientInfo',$data);	}		public function show_users($page=0)	{		if($this->session->userdata(''))			$this->session->unset_userdata('');			$config = array();        $config["base_url"] = base_url() . "clubs/user_records/show_users";        $config["total_rows"] = $this->user_model->user_count();        $config["per_page"] = 10;		$config['num_links'] = 3;				$config['full_tag_open'] = '<div class="pagination"><ul>';		$config['full_tag_close'] = '</ul></div>';				$config['first_tag_open'] = '<li class="prev page">';		$config['first_tag_close'] = '</li>';		 		$config['last_tag_open'] = '<li class="next page">';		$config['last_tag_close'] = '</li>';				$config['next_tag_open'] = '<li class="next page">';		$config['next_tag_close'] = '</li>';				$config['prev_tag_open'] = '<li class="prev page">';		$config['prev_tag_close'] = '</li>';		 		$config['cur_tag_open'] = '<li class="active"><a href="">';		$config['cur_tag_close'] = '</a></li>';		 		$config['num_tag_open'] = '<li class="page">';		$config['num_tag_close'] = '</li>';				$config['next_link'] = 'Next';		$config['prev_link'] = 'Prev';         $this->pagination->initialize($config);		$heId = $this->session->userdata('HE_id');		$data['users']=$this->user_model->get_all_users($heId,$config["per_page"], $page);        $data["links"] = $this->pagination->create_links();				$data['active']='userrecords';		if($this->session->userdata('club_logged')=='yes')			$this->load->view('clubs/userrecords',$data);		else			header("location:".base_url().'clubs/login');	}		public function filter_users($page=0)	{		if($this->input->post('', TRUE)) {			$filter = $this->input->post('', TRUE);			$this->session->set_userdata('', $filter);		}		else {			$filter = $this->session->userdata('');		}					$config = array();        $config["base_url"] = base_url() . "clubs/user_records/filter_users";        $config["total_rows"] = $this->user_model->user_filtered_count($filter);        $config["per_page"] = 1;		$config['num_links'] = 3;				$config['full_tag_open'] = '<div class="pagination"><ul>';		$config['full_tag_close'] = '</ul></div>';				$config['first_tag_open'] = '<li class="prev page">';		$config['first_tag_close'] = '</li>';		 		$config['last_tag_open'] = '<li class="next page">';		$config['last_tag_close'] = '</li>';				$config['next_tag_open'] = '<li class="next page">';		$config['next_tag_close'] = '</li>';				$config['prev_tag_open'] = '<li class="prev page">';		$config['prev_tag_close'] = '</li>';		 		$config['cur_tag_open'] = '<li class="active"><a href="">';		$config['cur_tag_close'] = '</a></li>';		 		$config['num_tag_open'] = '<li class="page">';		$config['num_tag_close'] = '</li>';				$config['next_link'] = 'Next';		$config['prev_link'] = 'Prev';         $this->pagination->initialize($config);		$heId = $this->session->userdata('HE_id');		$data['users']=$this->user_model->get_filtered_users($heId,$config["per_page"], $page, $filter);        $data["links"] = $this->pagination->create_links();				$data['active']='userrecords';		if($this->session->userdata('club_logged')=='yes')			$this->load->view('clubs/userrecords',$data);		else			header("location:".base_url().'clubs/login');	}		public function edit_user()	{			}		public function delete_user()	{		$id = $this->input->post('id', TRUE);		$userExist = $this->user_model->delete_user($id);	}		public function change_photo()	{		$name = $_FILES["file"]["name"];		move_uploaded_file($_FILES["file"]["tmp_name"], "./images/user_avatars/".$name);	}		public function get_user_info()	{		$id = $this->input->post('id', TRUE);		$userExist = $this->user_model->get_user_info($id);		echo $userExist;	}		public function downloadRecords($uid)	{		$path = "images/user_files/".$uid;				$zip = new ZipArchive();		$zip_name = time().".zip"; // Zip name		$zip->open($zip_name,  ZipArchive::CREATE);	 if (false !== ($dir = opendir($path)))     {         while (false !== ($file = readdir($dir)))         {             if ($file != '.' && $file != '..')             {				$file = $path.'/'.$file;				  if(file_exists($file)){				  $zip->addFromString(basename($file),  file_get_contents($file));  				  }				  else{				  				   echo"file does not exist";				  }			}					}	}		$zip->close();				header('Content-Type: application/zip');		header('Content-disposition: attachment; filename=filename.zip');		header('Content-Length: ' . filesize($zip_name));		readfile($zip_name);	}}/* End of file welcome.php *//* Location: ./application/controllers/welcome.php */